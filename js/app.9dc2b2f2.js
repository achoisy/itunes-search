(function(t){function e(e){for(var n,r,o=e[0],c=e[1],l=e[2],d=0,h=[];d<o.length;d++)r=o[d],a[r]&&h.push(a[r][0]),a[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(h.length)h.shift()();return i.push.apply(i,l||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],n=!0,o=1;o<s.length;o++){var c=s[o];0!==a[c]&&(n=!1)}n&&(i.splice(e--,1),t=r(r.s=s[0]))}return t}var n={},a={app:0},i=[];function r(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=n,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(s,n,function(e){return t[e]}.bind(null,n));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/itunes-search/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"14c3":function(t,e,s){},"53ed":function(t,e,s){"use strict";var n=s("14c3"),a=s.n(n);a.a},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("f751"),s("097d");var n=s("2b0e"),a=s("9f7b"),i=s.n(a),r=s("dc61"),o=s("17ad"),c=s("cb1f"),l=s("510b"),u=s("8a4b"),d=s("21e0"),h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("loading-screen",{attrs:{"is-loading":t.isLoading}}),s("header",[s("SearchBar",{on:{searchQuery:t.searchQuery,cancel:t.onUserCancel,selectedMedia:t.mediaChange}})],1),s("b-container",[s("ItunesList",{attrs:{itunesResults:t.itunesResults,scroll:t.scroll},on:{selectItem:t.selectItem}}),s("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"text-center"},[s("b-spinner",{attrs:{variant:"primary",type:"grow",label:"Spinning"}})],1),s("ItunesDetail",{attrs:{selectedItem:t.selectedItem}})],1)],1)},m=[],f=s("75fc"),p=s("795b"),b=s.n(p),v=s("bc3a"),g=s.n(v),w=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},_=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div")}],x=s("ee5a"),C=(s("1c36"),{name:"loader",props:["isLoading"],data:function(){return{}},watch:{isLoading:{handler:function(t){t?this.open():this.close()},immediate:!0}},methods:{open:function(){this.pleaseWaitInstance||(this.pleaseWaitInstance=Object(x["pleaseWait"])({logo:"/itunes-search/img/logo.svg",backgroundColor:"#0A0A0A",loadingHtml:'<h1 class="loading-message" style="color: white;">Made with Love</h1> <p style="color: #555555;"><small>Alexandre Choisy</small></p>'}))},close:function(){this.pleaseWaitInstance&&(this.pleaseWaitInstance.finish(),this.pleaseWaitInstance=null)}}}),I=C,y=(s("53ed"),s("2877")),k=Object(y["a"])(I,w,_,!1,null,"1cd6ca01",null),O=k.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-row",{staticClass:"header justify-content-md-center no-gutters"},[n("transition",{attrs:{name:"slide-fade"}},[t.showCancel?t._e():n("b-col",{staticClass:"headertitle text-center",attrs:{cols:"12",md:"4"}},[n("h1",{staticClass:"text-white"},[t._v("Recherche Itunes")])])],1),n("b-col",{attrs:{cols:"12",md:"8"}},[n("b-row",{staticClass:"no-gutters",attrs:{"align-v":"center","align-h":"center"}},[n("b-col",{attrs:{cols:"3"}},[n("b-dropdown",{staticClass:"d-flex",attrs:{variant:"dark","no-caret":"",right:""}},[n("template",{slot:"button-content"},[n("div",{staticClass:"d-flex align-items-center justify-content-end"},[n(t.seletedDropdown.icon,{tag:"component",staticClass:"dropicon float-left mr-2",attrs:{w:"30",h:"40"}}),n("p",{staticClass:"m-0 mr-2 d-none d-lg-block"},[t._v("\n                "+t._s(t.seletedDropdown.text)+"\n              ")]),n("img",{attrs:{src:s("d07c")}})],1)]),t._l(t.dropdownMenu,function(e,s){return n("b-dropdown-item",{key:s,staticClass:"d-flex align-items-center",on:{click:function(s){return t.onDropdownClick(e)}}},[n(e.icon,{tag:"component",staticClass:"dropicon float-left mr-2",attrs:{w:"30",h:"30"}}),n("p",{staticClass:"m-0"},[t._v("\n              "+t._s(e.text)+"\n            ")])],1)})],2)],1),n("b-col",{attrs:{cols:"9"}},[n("div",{staticClass:"serachbar"},[n("div",{staticClass:"searchinput"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],ref:"search",attrs:{placeholder:t.placeholder},domProps:{value:t.searchTerm},on:{focus:t.onInputFocus,focusout:t.onInputFocusOut,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSubmit(e)},input:function(e){e.target.composing||(t.searchTerm=e.target.value)}}})]),n("transition",{attrs:{name:"slide-out"}},[t.showCancel?n("div",{staticClass:"d-flex"},[n("button",{staticClass:"btn btn-link cancel text-center",on:{click:t.onCancelclick}},[t._v("\n                Annuler\n              ")]),n("button",{staticClass:"btn btn-link cancel text-center d-none d-lg-block",on:{click:t.onSubmit}},[t._v("\n                Chercher\n              ")])]):t._e()])],1)])],1)],1)],1)},R=[],j=(s("386d"),{name:"SearchBar",props:[],data:function(){return{placeholder:"Livre, Music, Film...",showCancel:!1,searchTerm:"",isTyping:!1,dropdownMenu:[{media:"all",text:"Tous",icon:"md-search-icon"},{media:"movie",text:"Films",icon:"md-videocam-icon"},{media:"podcast",text:"Podcasts",icon:"md-wifi-icon"},{media:"music",text:"Musique",icon:"md-musical-notes-icon"},{media:"audiobook",text:"Livres audio",icon:"md-book-icon"},{media:"tvShow",text:"SÃ©ries TV",icon:"md-tv-icon"}],seletedDropdown:{media:"all",text:"Tous",icon:"md-search-icon"}}},methods:{onDropdownClick:function(t){this.seletedDropdown=t,this.$emit("selectedMedia",this.seletedDropdown),this.searchTerm&&this.$emit("searchQuery",this.searchTerm)},onInputFocus:function(){this.placeholder="",this.showCancel=!0},onInputFocusOut:function(){this.searchTerm||(this.placeholder="Livre, Music, Film...",this.showCancel=!1)},onCancelclick:function(){this.searchTerm="",this.$refs.search.blur(),this.onInputFocusOut(),this.$emit("cancel")},onSubmit:function(){this.$refs.search.blur(),this.$emit("searchQuery",this.searchTerm)}}}),$=j,L=(s("7ce6"),Object(y["a"])($,T,R,!1,null,"43d5aaf0",null)),U=L.exports,P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-row",{attrs:{"align-v":"center"}},[s("b-card-group",{attrs:{columns:""}},t._l(t.itunesResults,function(e,n){return s("itunesListItem",{key:n,attrs:{itunesResult:e},on:{selectItem:t.selectItem}})}),1),s("Observer",{on:{intersect:t.intersected}})],1)},S=[],A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-card",{staticClass:"overflow-hidden mr-2 ml-2 carditem",attrs:{"text-variant":"white","no-body":""},on:{click:t.selectItem}},[s("b-row",{staticClass:"p-2",attrs:{"no-gutters":"","align-v":"start"}},[s("b-col",{staticClass:"text-center footer mb-2",attrs:{cols:"12"}},[s("small",{staticClass:"text-white"},[t._v(t._s(t.itunesResult.kind.toUpperCase()))])]),t.thumbnailUrl?s("b-col",{attrs:{cols:"4"}},[s("b-img-lazy",t._b({attrs:{src:t.thumbnailUrl,rounded:""}},"b-img-lazy",t.mainProps,!1))],1):t._e(),s("b-col",[s("b-card-body",{staticClass:"p-0 pl-3"},[s("b-card-title",[s("h6",[t._v(t._s(t.itunesResult.trackName))])]),s("b-card-text",[s("p",{staticClass:"m-0"},[s("small",[t._v(t._s(t.itunesResult.collectionName))])])])],1)],1)],1)],1)},M=[],E={name:"ItuneslistItem",props:["itunesResult"],data:function(){return{mainProps:{blank:!0,blankColor:"#bbb",width:"100",height:"100"}}},computed:{thumbnailUrl:function(){return this.itunesResult.artworkUrl100?this.itunesResult.artworkUrl100:""}},methods:{selectItem:function(){this.$emit("selectItem",this.itunesResult)}}},D=E,F=(s("acd2"),Object(y["a"])(D,A,M,!1,null,"a7653240",null)),N=F.exports,z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"observer"})},W=[],Q={props:["options"],data(){return{observer:null}},mounted(){const{options:t}=this;this.observer=new IntersectionObserver(([t])=>{t&&t.isIntersecting&&this.$emit("intersect")},t),this.observer.observe(this.$el)},destroyed(){this.observer.disconnect()}},B=Q,q=Object(y["a"])(B,z,W,!1,null,null,null),J=q.exports,H={name:"ItunesList",props:["itunesResults","scroll"],methods:{intersected:function(){this.scroll()},selectItem:function(t){this.$emit("selectItem",t)}},components:{itunesListItem:N,Observer:J}},V=H,G=Object(y["a"])(V,P,S,!1,null,null,null),K=G.exports,X=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:""}},[s("b-modal",{attrs:{size:"xl",id:"modal-xl",centered:"",scrollable:"",title:t.title,"header-bg-variant":"dark","header-text-variant":"light","body-bg-variant":"light","body-text-variant":"dark","footer-bg-variant":"dark","footer-text-variant":"light"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[t.thumbnailUrl?s("b-img-lazy",t._b({staticClass:"float-left mr-2",attrs:{src:t.thumbnailUrl,rounded:""}},"b-img-lazy",t.mainProps,!1)):t._e(),s("b-card-body",[s("b-card-title",[t._v(t._s(t.selectedItem.trackName))]),s("b-card-sub-title",{staticClass:"mb-2"},[t._v(t._s(t.selectedItem.artistName))]),s("b-card-text",[t._v("\n      "+t._s(t.selectedItem.collectionName)+"\n    ")])],1),s("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("b-button",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(e){t.show=!1}}},[t._v("\n        Fermer\n      ")])],1)],1)],1)},Y=[],Z={name:"modal",props:["selectedItem"],data:function(){return{show:!1,mainProps:{blank:!0,blankColor:"#bbb",width:"100",height:"100"}}},watch:{selectedItem:function(t){this.show=!!t}},computed:{title:function(){return this.selectedItem&&this.selectedItem.kind?this.selectedItem.kind.toUpperCase():""},thumbnailUrl:function(){return this.selectedItem.artworkUrl100?this.selectedItem.artworkUrl100:""}}},tt=Z,et=(s("9626"),Object(y["a"])(tt,X,Y,!1,null,"e7f4b89c",null)),st=et.exports,nt=s("896d"),at={name:"App",data:function(){return{isLoading:!0,itunesResults:[],loading:!1,searchOffset:0,searchTerm:"",selectedItem:"",media:"all"}},mounted:function(){var t=this;setTimeout(function(){t.isLoading=!1},3e3)},methods:{searchQuery:function(t){this.searchTerm=t,this.searchOffset=0,this.searchTerm&&this.searchApi()},mediaChange:function(t){var e=t.media;this.media=e},searchApi:function(){var t=this;this.loading=!0,g.a.get("".concat(nt.API_URL),{crossdomain:!0,params:{country:"fr",limit:"25",term:this.searchTerm,media:this.media,offset:this.searchOffset}}).then(function(e){return new b.a(function(s,n){try{e.data.results.length&&(0===t.searchOffset?s(e.data.results):s([].concat(Object(f["a"])(t.itunesResults),Object(f["a"])(e.data.results)))),n()}catch(a){n(a)}})}).then(function(e){setTimeout(function(){t.loading=!1,t.itunesResults=e},1e3)}).catch(function(e){e&&console.log("Axios request Error:",e),t.loading=!1})},scroll:function(){this.searchTerm&&!this.loading&&this.itunesResults.length>=this.searchOffset&&this.searchOffset<=175&&(this.loading=!0,this.searchOffset=this.itunesResults.length+25,this.searchApi())},onUserCancel:function(){this.searchTerm="",this.searchOffset=0,this.loading=!1,this.itunesResults=[]},selectItem:function(t){this.selectedItem=t}},components:{SearchBar:U,ItunesList:K,ItunesDetail:st,"loading-screen":O}},it=at,rt=(s("5c0b"),Object(y["a"])(it,h,m,!1,null,null,null)),ot=rt.exports;s("a3dd");n["a"].use(i.a),n["a"].component("md-search-icon",r["a"]),n["a"].component("md-videocam-icon",o["a"]),n["a"].component("md-musical-notes-icon",c["a"]),n["a"].component("md-book-icon",l["a"]),n["a"].component("md-wifi-icon",u["a"]),n["a"].component("md-tv-icon",d["a"]),new n["a"]({el:"#app",render:function(t){return t(ot)}})},"5c0b":function(t,e,s){"use strict";var n=s("5e27"),a=s.n(n);a.a},"5e27":function(t,e,s){},"6ad4":function(t,e,s){},"6e9c":function(t,e,s){},"7ce6":function(t,e,s){"use strict";var n=s("6ad4"),a=s.n(n);a.a},"896d":function(t){t.exports={API_URL:"https://itunes.apple.com/search"}},9626:function(t,e,s){"use strict";var n=s("6e9c"),a=s.n(n);a.a},acd2:function(t,e,s){"use strict";var n=s("c9d6"),a=s.n(n);a.a},c9d6:function(t,e,s){},d07c:function(t,e,s){t.exports=s.p+"img/down.580dadf5.svg"}});
//# sourceMappingURL=app.9dc2b2f2.js.map